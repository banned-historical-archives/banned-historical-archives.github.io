(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[977],{5610:(e,t,n)=>{"use strict";n.d(t,{b:()=>i});var r=n(6540);let i=()=>r.useRef({})},5353:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(4379),i=n(4848);function o(e){var t=e.authors,n=e.onClick;return(0,i.jsx)(i.Fragment,{children:t.map(function(e){return(0,i.jsx)(r.A,{onClick:function(){n?n(e):window.open("/articles?author=".concat(encodeURIComponent(e)),"_blank")},sx:{m:.3},label:e},e)})})}},4976:(e,t,n)=>{"use strict";n.d(t,{A:()=>I});var r=n(2819),i=n(6540),o=n(3556),a=n(8967),s=n(5703),c=n(7500),l=n(6043),u=n(4104),d=n(2062),f=n(8495),h=n(7239),p=n(404),m=n(1801),x=n(8348),g=n(5956),v=n(1952),b=n(3156),y=n(1423),j=n(574),A=n(6715),w=n(5315),_=n(7400),C=n(7585),S=n(6860),k=n(4848),O=n(7836),D=(0,a.Ay)("div")(function(e){var t=e.theme;return(0,o.A)({position:"relative",borderRadius:t.shape.borderRadius,backgroundColor:(0,s.X4)(t.palette.common.white,.15),"&:hover":{backgroundColor:(0,s.X4)(t.palette.common.white,.25)},marginRight:t.spacing(2),marginLeft:0,width:"100%"},t.breakpoints.up("sm"),{marginLeft:t.spacing(3),width:"auto"})}),R=(0,a.Ay)("div")(function(e){return{padding:e.theme.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}}),M=(0,a.Ay)(_.Ay)(function(e){var t=e.theme;return{color:"inherit","& .MuiInputBase-input":(0,o.A)({padding:t.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(t.spacing(4),")"),transition:t.transitions.create("width"),width:"100%"},t.breakpoints.up("md"),{width:"20ch"})}}),P=[{name:"首页",path:"/"},{name:"文档",path:"/articles"},{name:"音乐",path:"/music"},{name:"图库",path:"/gallery"}];function E(){var e=(0,A.useRouter)(),t=(0,i.useState)(""),n=t[0],o=t[1],a=(0,i.useState)(!1),s=a[0],_=a[1],E=function(){_(!s)},F=(0,k.jsx)(m.A,{onClick:E,sx:{textAlign:"center"},children:(0,k.jsx)(c.A,{children:P.map(function(e){return(0,k.jsx)(l.Ay,{disablePadding:!0,children:(0,k.jsx)(u.A,{sx:{textAlign:"center"},href:e.path,target:"_blank",children:(0,k.jsx)(d.A,{primary:e.name})})},e.name)})})});return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(p.A,{position:"static",children:(0,k.jsx)(b.A,{maxWidth:"xl",children:(0,k.jsxs)(g.A,{disableGutters:!0,children:[(0,k.jsxs)(r.A,{sx:{position:"relative",ml:1,transform:"translateY(4px)"},children:[(0,k.jsx)(f.A,{sx:{width:20,position:"absolute",bottom:"50%",left:"50%",transform:"translateX(-50%)"}}),(0,k.jsx)(j.A,{})]}),(0,k.jsx)(v.A,{variant:"h6",noWrap:!0,component:"a",sx:{ml:1,mr:2,fontWeight:700,letterSpacing:".3rem",textDecoration:"none",cursor:"pointer"},style:{color:"white"},href:"/",onClick:function(){return e.push("/")},children:"和谐历史档案馆"}),(0,k.jsxs)(D,{sx:{display:{xs:"none",sm:"none",md:"flex",lg:"flex",xl:"flex"}},children:[(0,k.jsx)(R,{children:(0,k.jsx)(S.A,{})}),(0,k.jsx)(M,{placeholder:"全站搜索",onKeyDown:function(e){if("Enter"===e.key){var t;if(null!==(t=O)&&void 0!==O&&null!==(t=t.env)&&void 0!==t&&t.LOCAL_SEARCH_ENGINE){window.open("".concat(location.protocol,"//").concat(location.host,"/search?keyword=")+encodeURIComponent(n),"_blank");return}window.open("https://www.google.com/search?q="+encodeURIComponent("site:banned-historical-archives.github.io "+n),"_blank")}},value:n,onChange:function(e){return o(e.target.value)},inputProps:{"aria-label":"search"}})]}),(0,k.jsx)(r.A,{sx:{flex:1}}),(0,k.jsxs)(r.A,{sx:{display:{xs:"none",sm:"flex"}},direction:"row",justifyContent:"flex-end",children:[P.map(function(t){var n=t.name,r=t.path;return(0,k.jsx)(y.A,{sx:{color:"white"},onClick:function(){return e.push(r)},children:n},r)}),(0,k.jsxs)(y.A,{href:"https://github.com/banned-historical-archives/banned-historical-archives.github.io/issues",target:"_blank",sx:{color:"white"},children:[(0,k.jsx)(w.A,{sx:{mr:1}}),"讨论"]})]}),(0,k.jsx)(C.A,{size:"small",edge:"start",color:"inherit","aria-label":"menu",sx:{display:{xs:"flex",sm:"none"}},onClick:E,children:(0,k.jsx)(h.A,{})})]})})}),(0,k.jsx)(m.A,{component:"nav",children:(0,k.jsx)(x.Ay,{variant:"temporary",anchor:"right",open:s,onClose:E,ModalProps:{keepMounted:!0},sx:{display:{xs:"block",sm:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:240}},children:F})})]})}function F(){return null}var z=n(3815);function I(e){var t=e.children,n=(0,i.useState)(!1),o=n[0],a=n[1],s=(0,A.useRouter)();return(0,i.useEffect)(function(){var e=function(e){a(!0)},t=function(){a(!1)};return s.events.on("routeChangeStart",e),s.events.on("routeChangeComplete",t),s.events.on("routeChangeError",t),function(){s.events.off("routeChangeStart",e),s.events.off("routeChangeComplete",t),s.events.off("routeChangeError",t)}},[s]),(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)(r.A,{sx:{position:"absolute",height:"100%",width:"100%"},direction:"column",children:[(0,k.jsx)(E,{}),o?(0,k.jsxs)(r.A,{spacing:1,p:2,children:[(0,k.jsx)(z.A,{variant:"text",sx:{fontSize:"1rem"}}),(0,k.jsx)(z.A,{variant:"rectangular",height:60}),(0,k.jsx)(z.A,{variant:"rectangular",height:60}),(0,k.jsx)(z.A,{variant:"rectangular",height:60}),(0,k.jsx)(z.A,{variant:"rectangular",height:60})]}):(0,k.jsx)("main",{style:{flex:1,position:"relative",overflow:"hidden"},children:t}),(0,k.jsx)(F,{})]})})}},1854:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(4379),i=n(1952),o=n(6540),a=n(2516),s=n(4848);function c(e){var t=e.tags,n=e.onClick,c=(0,o.useState)(null),l=c[0],u=c[1],d=(0,o.useState)(""),f=d[0],h=d[1],p=function(){u(null)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.Ay,{open:!!l,anchorEl:l,disableRestoreFocus:!0,sx:{pointerEvents:"none",marginTop:"10px"},anchorOrigin:{vertical:"bottom",horizontal:"left"},children:(0,s.jsx)(i.A,{sx:{p:1},children:f})}),t.map(function(e){return(0,s.jsx)(r.A,{onMouseEnter:function(t){h(e.type),u(t.currentTarget)},onMouseLeave:p,onClick:function(){n?n(e):window.open("/articles?tag=".concat(encodeURIComponent(e.name)),"_blank")},sx:{m:.3,lineHeight:"34px",float:"left"},label:e.name},e.type+"##"+e.name)})]})}},7917:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>el});var r=n(3439),i=n(8242),o=n(3556),a=n(4756),s=n.n(a),c=n(6540),l=n(2516),u=n(3323),d=n(3368),f=n.n(d),h=n(5610),p=n(938),m=n(4976),x=n(1423),g=n(4379),v=n(2819),b=n(3346),y=n(4848);let j=(0,b.A)((0,y.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings");var A=n(1952),w=n(1854),_=n(5353),C=n(2402),S=n(4164),k=n(5659),O=n(8967),D=n(8174),R=n(8413),M=n(1609);function P(e){return(0,M.Ay)("MuiDialogActions",e)}(0,R.A)("MuiDialogActions",["root","spacing"]);var E=["className","disableSpacing"];function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach(function(t){(0,o.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var I=function(e){var t=e.classes,n=e.disableSpacing;return(0,k.A)({root:["root",!n&&"spacing"]},P,t)},N=(0,O.Ay)("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,!n.disableSpacing&&t.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:function(e){return!e.ownerState.disableSpacing},style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),T=c.forwardRef(function(e,t){var n=(0,D.b)({props:e,name:"MuiDialogActions"}),r=n.className,i=n.disableSpacing,o=(0,C.A)(n,E),a=z(z({},n),{},{disableSpacing:void 0!==i&&i}),s=I(a);return(0,y.jsx)(N,z({className:(0,S.A)(s.root,r),ownerState:a,ref:t},o))}),W=n(4179);function L(e){return(0,M.Ay)("MuiDialogContent",e)}(0,R.A)("MuiDialogContent",["root","dividers"]);var G=n(282),U=["className","dividers"];function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach(function(t){(0,o.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var B=function(e){var t=e.classes,n=e.dividers;return(0,k.A)({root:["root",n&&"dividers"]},L,t)},H=(0,O.Ay)("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.dividers&&t.dividers]}})((0,W.A)(function(e){var t=e.theme;return{flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:function(e){return e.ownerState.dividers},style:{padding:"16px 24px",borderTop:"1px solid ".concat((t.vars||t).palette.divider),borderBottom:"1px solid ".concat((t.vars||t).palette.divider)}},{props:function(e){return!e.ownerState.dividers},style:(0,o.A)({},".".concat(G.A.root," + &"),{paddingTop:0})}]}})),K=c.forwardRef(function(e,t){var n=(0,D.b)({props:e,name:"MuiDialogContent"}),r=n.className,i=n.dividers,o=(0,C.A)(n,U),a=q(q({},n),{},{dividers:void 0!==i&&i}),s=B(a);return(0,y.jsx)(H,q({className:(0,S.A)(s.root,r),ownerState:a,ref:t},o))}),Y=n(6647),$=n(6493),J=n(2664);function Q(e){var t=parseInt(e);if(!isNaN(t)&&t!=1/0&&t!=-1/0)return t}var V=n(9820),Z=n(8170),ee=n(9543);function et(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return en(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return en(e,void 0)}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function en(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function er(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ei(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?er(Object(n),!0).forEach(function(t){(0,o.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):er(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function eo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e||0===e?e<10?"0".concat(e):e:t}var ea={year_a:1800,year_b:2200,month_a:1,month_b:12,day_a:1,day_b:31},es=["毛泽东选集","毛泽东全集","毛泽东文集","中国文化大革命文库"],ec=["毛泽东","江青","王洪文","张春桥","姚文元"];function el(){var e,t,n,o,a,d,m,b,C,S,k,O,D,R,M,P,E,F,z,I,N,W,L,G,U,X,q,B,H,en,er,el,eu,ed,ef,eh,ep,em,ex,eg,ev,eb=(0,c.useState)(!1),ey=eb[0],ej=eb[1],eA=(0,h.b)(),ew=(0,c.useState)({items:[]}),e_=ew[0],eC=ew[1],eS=(0,c.useRef)({items:[]}),ek=(0,c.useState)(!1),eO=ek[0],eD=ek[1];(0,c.useEffect)(function(){eC(ei(ei({},e_),{},{items:"undefined"!=typeof location&&location.search?location.search.startsWith("?tag=")?[{field:"tags",operator:"contains",value:decodeURIComponent(location.search.split("=")[1])}]:location.search.startsWith("?author=")?[{field:"authors",operator:"contains",value:decodeURIComponent(location.search.split("=")[1])}]:[]:[]}))},[]);var eR=(0,c.useRef)([{field:"title",headerName:"标题",minWidth:350,flex:1,renderCell:function(e){return(0,y.jsx)("a",{href:"/article?id=".concat(encodeURIComponent(e.row.id)),rel:"noreferrer",target:"_blank",children:e.row.title})}},{field:"authors",headerName:"作者",minWidth:150,flex:1,valueGetter:function(e){return e.map(function(e){return e}).join(",")},renderCell:function(e){return(0,y.jsx)("div",{style:{overflow:"scroll"},children:(0,y.jsx)(_.A,{authors:e.row.authors,onClick:function(e){var t=ei(ei({},eS.current),{},{items:[].concat((0,i.A)(eS.current.items.filter(function(e){return"authors"!=e.field})),[{id:"authors",field:"authors",operator:"contains",value:e}])});eC(t),eS.current=t}})})}},{field:"dates",headerName:"时间",description:"可能包含多个时间点（起草时间，发布时间，子文稿时间等）或时间段",minWidth:150,flex:1,valueGetter:function(e){return e.map(function(e){return e?[e.year||"----",eo(e.month,"--"),eo(e.day,"--")].filter(function(e){return e}).join("/"):"----/--/--"}).join(" ")},renderCell:function(e){return(0,y.jsx)(v.A,{spacing:1,children:e.row.is_range_date?(0,y.jsx)(A.A,{variant:"caption",children:e.row.dates.map(function(e){return[e.year,eo(e.month),eo(e.day)].filter(function(e){return e}).join("/")}).sort(function(e,t){return e>t?1:-1}).join("至")}):e.row.dates.map(function(e){return[e.year,eo(e.month),eo(e.day)].filter(function(e){return e}).join("/")}).map(function(e){return(0,y.jsx)(A.A,{variant:"caption",children:e},e)})})}},{field:"publications",headerName:"来源",flex:1,minWidth:150,valueGetter:function(e,t){return t.books.join(",")},renderCell:function(e){var t;return(0,y.jsx)("div",{style:{overflow:"scroll",height:"100%"},children:(0,y.jsx)(w.A,{tags:(null===(t=e.row.books)||void 0===t?void 0:t.map(function(e){return{name:e,type:"来源",id:e}}))||[],onClick:function(e){var t=ei(ei({},eS.current),{},{items:[].concat((0,i.A)(eS.current.items.filter(function(e){return"publications"!=e.field})),[{id:"publications",field:"publications",operator:"contains",value:e.name}])});eC(t),eS.current=t}})})}},{field:"tags",headerName:"标签",minWidth:150,flex:1,sortComparator:function(e,t){return e>t?1:-1},valueGetter:function(e){return e.map(function(e){return e.name}).join(",")},renderCell:function(e){return(0,y.jsx)("div",{style:{overflow:"scroll",height:"100%"},children:(0,y.jsx)(w.A,{tags:e.row.tags,onClick:function(e){var t=ei(ei({},eS.current),{},{items:[].concat((0,i.A)(eS.current.items.filter(function(e){return"tags"!=e.field})),[{id:"tags",field:"tags",operator:"contains",value:e.name}])});eC(t),eS.current=t}})})}}]),eM=(0,c.useState)([]),eP=eM[0],eE=eM[1],eF=(0,c.useState)([]),ez=eF[0],eI=eF[1],eN=(0,c.useState)([]),eT=eN[0],eW=eN[1],eL=(0,c.useState)([]),eG=eL[0],eU=eL[1],eX=(0,c.useRef)([]),eq=(0,c.useRef)(new Set),eB=(0,c.useRef)(new Set),eH=(0,c.useRef)(new Set),eK=(0,c.useState)(0),eY=eK[0],e$=eK[1];(0,c.useEffect)(function(){(0,r.A)(s().mark(function e(){var t,n,r;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://raw.githubusercontent.com/banned-historical-archives/banned-historical-archives.github.io/refs/heads/indexes/indexes/file_count.json");case 2:return e.next=4,e.sent.json();case 4:t=e.sent,n=s().mark(function e(){var n,o,a,c,l,u,d,f,h,p,m,x,g,v;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://raw.githubusercontent.com/banned-historical-archives/banned-historical-archives.github.io/refs/heads/indexes/indexes/article_list_".concat(r,".json"));case 2:return e.next=4,e.sent.json();case 4:o=et((n=e.sent).tags);try{for(o.s();!(a=o.n()).done;)c=a.value,l="".concat(c.type,"--").concat(c.name),eq.current.has(l)||eq.current.add(l)}catch(e){o.e(e)}finally{o.f()}u=et(n.books);try{for(u.s();!(d=u.n()).done;)f=d.value,eB.current.has(f)||eB.current.add(f)}catch(e){u.e(e)}finally{u.f()}h=et(n.articles);try{for(h.s();!(p=h.n()).done;){m=p.value,x=et(m.authors);try{for(x.s();!(g=x.n()).done;)v=g.value,eH.current.has(v)||eH.current.add(v)}catch(e){x.e(e)}finally{x.f()}eX.current.push(ei(ei({},m),{},{tags:Array.from(new Set(m.tag_ids)).map(function(e){return ei(ei({},n.tags[e]),{},{id:"".concat(n.tags[e].type,"--").concat(n.tags[e].name)})}),books:m.book_ids.map(function(e){return n.books[e]})}))}}catch(e){h.e(e)}finally{h.f()}r%10==0&&(eU((0,i.A)(eX.current)),eW(Array.from(eH.current.keys())),eE(Array.from(eB.current.keys())),eI(Array.from(eq.current.keys()).map(function(e){return{id:e,name:e.split("--")[1],type:e.split("--")[0]}}))),ej(!0),e$(r/(t.article_list-1)*100);case 14:case"end":return e.stop()}},e)}),r=0;case 7:if(!(r<t.article_list)){e.next=12;break}return e.delegateYield(n(),"t0",9);case 9:++r,e.next=7;break;case 12:eU((0,i.A)(eX.current)),eW(Array.from(eH.current.keys())),eE(Array.from(eB.current.keys())),eI(Array.from(eq.current.keys()).map(function(e){return{id:e,name:e.split("--")[1],type:e.split("--")[0]}})),eD(!0);case 17:case"end":return e.stop()}},e)}))()},[]);var eJ=(0,c.useMemo)(function(){var e=new Map;return ez.forEach(function(t){var n=t.type,r=t.name,i="".concat(n,"--").concat(r);e.get(n)||e.set(n,new Map),e.get(n).set(i,{type:n,name:r,id:i})}),e},[ez]),eQ=(0,c.useMemo)(function(){return eP.sort()},[eP]),eV=(0,c.useMemo)(function(){return eT.sort()},[eT]),eZ=(t=(e=(0,c.useState)(!1))[0],n=e[1],a=(o=(0,c.useState)(null))[0],d=o[1],b=(m=(0,c.useState)([]))[0],C=m[1],k=(S=(0,c.useState)(ez.length?ez[0]:null))[0],O=S[1],D=(0,c.useCallback)(function(){return n(!1)},[]),M=(R=(0,c.useState)([]))[0],P=R[1],(0,c.useEffect)(function(){var e,t=Array.from((null===(e=eJ.get(V.PK.articleType))||void 0===e?void 0:e.values())||[]);P(t),C(t)},[eJ]),E=(0,c.useCallback)(function(){C(k?[].concat((0,i.A)(M),[k]):M),d(k?k.id:null),n(!1)},[k,M]),{TagDialog:(0,y.jsxs)(Y.A,{onClose:D,open:t,fullWidth:!0,maxWidth:"lg",children:[(0,y.jsx)(J.A,{children:"选择标签"}),(0,y.jsx)(K,{children:Array.from(eJ.keys()).map(function(e){return(0,y.jsxs)("div",{children:[(0,y.jsxs)(A.A,{variant:"body1",sx:{whiteSpace:"nowrap"},children:[e,"："]}),Array.from(eJ.get(e).values()).sort(function(e,t){return e.name>t.name?1:-1}).map(function(e){return(0,y.jsx)(g.A,{sx:{m:.5},onClick:function(){return O(e)},label:e.name,color:(null==k?void 0:k.id)===e.id?"primary":"default",variant:(null==k?void 0:k.id)===e.id?"filled":"outlined"},e.id)})]},e)})}),(0,y.jsxs)(T,{children:[(0,y.jsx)(x.A,{onClick:D,children:"取消"}),(0,y.jsx)(x.A,{onClick:E,autoFocus:!0,children:"确定"})]})]}),tagFilter:a,setTagDialog:n,setTagFilter:d,tags:b}),e0=eZ.TagDialog,e1=eZ.tagFilter,e2=eZ.setTagDialog,e4=eZ.setTagFilter,e3=eZ.tags,e6=(0,c.useState)(ea),e5=e6[0],e9=e6[1],e7=(F=function(e){e9(e)},z=(0,c.useRef)(ea),N=(I=(0,c.useState)(!1))[0],W=I[1],(L=(0,c.useState)(0))[0],G=L[1],U=(0,c.useCallback)(function(){var e=z.current,t={};e.year_a&&e.year_b&&e.year_b>=e.year_a&&(t.year_a=e.year_a,t.year_b=e.year_b),e.month_a&&e.month_b&&e.month_a>=1&&e.month_a<=12&&e.month_b>=1&&e.month_b<=12&&(t.month_a=e.month_a,t.month_b=e.month_b),e.day_a&&e.day_b&&e.day_a>=1&&e.day_a<=31&&e.day_b>=1&&e.day_b<=31&&(t.day_a=e.day_a,t.day_b=e.day_b),t.year_a&&t.month_a&&t.day_a&&(F(t),W(!1),z.current=t,G(function(e){return e+1}))},[]),{DateFilterDialog:(0,y.jsxs)(Y.A,{onClose:function(){return W(!1)},open:N,children:[(0,y.jsx)(J.A,{children:"时间过滤器"}),(0,y.jsx)(K,{children:(0,y.jsxs)(v.A,{spacing:1,children:[(0,y.jsx)(A.A,{variant:"subtitle1",children:"开始时间"}),(0,y.jsx)($.A,{label:"年",value:z.current.year_a,size:"small",onChange:function(e){z.current.year_a=Q(e.target.value),G(function(e){return e+1})}}),(0,y.jsx)($.A,{label:"月",value:z.current.month_a,size:"small",onChange:function(e){z.current.month_a=Q(e.target.value),G(function(e){return e+1})}}),(0,y.jsx)($.A,{label:"日",value:z.current.day_a,size:"small",onChange:function(e){z.current.day_a=Q(e.target.value),G(function(e){return e+1})}}),(0,y.jsx)(A.A,{variant:"subtitle1",children:"结束时间"}),(0,y.jsx)($.A,{label:"年",value:z.current.year_b,size:"small",onChange:function(e){z.current.year_b=Q(e.target.value),G(function(e){return e+1})}}),(0,y.jsx)($.A,{label:"月",value:z.current.month_b,size:"small",onChange:function(e){z.current.month_b=Q(e.target.value),G(function(e){return e+1})}}),(0,y.jsx)($.A,{label:"日",value:z.current.day_b,size:"small",onChange:function(e){z.current.day_b=Q(e.target.value),G(function(e){return e+1})}})]})}),(0,y.jsxs)(T,{children:[(0,y.jsx)(x.A,{onClick:function(){return W(!1)},children:"取消"}),(0,y.jsx)(x.A,{onClick:U,autoFocus:!0,children:"确定"})]})]}),showDateFilterDialog:function(){return W(!0)}}),e8=e7.DateFilterDialog,te=e7.showDateFilterDialog,tt=(0,c.useState)(null),tn=tt[0],tr=tt[1],ti=(X=function(e){tr(e||null)},B=(q=(0,c.useState)(!1))[0],H=q[1],er=(en=(0,c.useState)(eV[0]))[0],el=en[1],eu=(0,c.useRef)([{field:"name",headerName:"作者",minWidth:350,flex:1,renderCell:function(e){return(0,y.jsx)(g.A,{sx:{m:.5},onClick:function(){el(e.row.name)},label:e.row.name,color:e.row.selected?"primary":"default",variant:e.row.selected?"filled":"outlined"},e.row.name)}}]),ed=(0,c.useMemo)(function(){return eV.map(function(e){return{name:e,selected:er==e}})},[eV,er]),{AuthorDialog:(0,y.jsxs)(Y.A,{onClose:function(){H(!1)},open:B,fullWidth:!0,maxWidth:"lg",children:[(0,y.jsx)(J.A,{children:"选择作者"}),(0,y.jsx)(K,{sx:{height:600},children:(0,y.jsx)(p.C,{headerFilters:!0,disableColumnFilter:!0,getRowId:function(e){return e.name},disableRowSelectionOnClick:!0,rows:ed,columns:eu.current,localeText:u.g.components.MuiDataGrid.defaultProps.localeText,pageSizeOptions:[100]})}),(0,y.jsxs)(T,{children:[(0,y.jsx)(x.A,{onClick:function(){H(!1)},children:"取消"}),(0,y.jsx)(x.A,{onClick:function(){X(er),H(!1)},autoFocus:!0,children:"确定"})]})]}),showAuthorDialog:function(){return H(!0)}}),to=ti.AuthorDialog,ta=ti.showAuthorDialog,ts=(0,c.useState)(null),tc=ts[0],tl=ts[1],tu=(ef=function(e){tl(e)},ep=(eh=(0,c.useState)(!1))[0],em=eh[1],eg=(ex=(0,c.useState)(eQ[0]))[0],ev=ex[1],{SourceDialog:(0,y.jsxs)(Y.A,{onClose:function(){return em(!1)},open:ep,fullWidth:!0,maxWidth:"lg",children:[(0,y.jsx)(J.A,{children:"选择来源"}),(0,y.jsx)(K,{children:eQ.map(function(e){return(0,y.jsx)(g.A,{sx:{m:.5},onClick:function(){return ev(e)},label:e,color:eg===e?"primary":"default",variant:eg===e?"filled":"outlined"},e)})}),(0,y.jsxs)(T,{children:[(0,y.jsx)(x.A,{onClick:function(){em(!1)},children:"取消"}),(0,y.jsx)(x.A,{onClick:function(){ef(eg),em(!1)},autoFocus:!0,children:"确定"})]})]}),showSourceDialog:function(){return em(!0)}}),td=tu.SourceDialog,tf=tu.showSourceDialog,th=(0,c.useState)(null),tp=th[0],tm=th[1],tx=function(e){tm(e.currentTarget)},tg=(0,c.useMemo)(function(){return eG.filter(function(e){return function(e,t){var n=1e4*t.year_a+100*t.month_a+t.day_a,r=1e4*t.year_b+100*t.month_b+t.day_b;if(!e.is_range_date)return e.dates.reduce(function(e,t){var i=1e4*t.year+100*(t.month||0)+(t.day||0);return e&&n<=i&&r>=i},!0);var i=1e4*e.dates[0].year+100*(e.dates[0].month||0)+(e.dates[0].day||0),o=1e4*e.dates[1].year+100*(e.dates[1].month||0)+(e.dates[1].day||0);return i>=n&&o<=r}(e,e5)}).filter(function(e){return!tn||!!e.authors.find(function(e){return e===tn})}).filter(function(e){return!tc||!!e.books.find(function(e){return e.indexOf(tc)>-1})}).filter(function(e){return!e1||!!e.tags.find(function(e){return e.id===e1})})},[eG,e5,e1,tn,tc]);return ey?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(f(),{children:(0,y.jsx)("title",{children:"和谐历史档案馆 Banned Historical Archives"})}),e8,to,td,e0,(0,y.jsxs)(v.A,{p:2,spacing:2,sx:{position:"relative",flex:1,height:"100%"},children:[(0,y.jsx)(v.A,{direction:"row",children:(0,y.jsxs)(Z.A,{container:!0,spacing:1,children:[(0,y.jsx)(Z.A,{size:{md:5,xs:12},children:(0,y.jsxs)(v.A,{direction:"row",alignItems:"center",children:[(0,y.jsx)(A.A,{variant:"body1",sx:{whiteSpace:"nowrap"},children:"时间范围："}),(0,y.jsx)(v.A,{direction:"row",spacing:1,children:(0,y.jsx)(g.A,{icon:(0,y.jsx)(j,{fontSize:"small"}),onClick:function(){return te()},label:["".concat(e5.year_a,"年"),"".concat(e5.month_a,"月"),"".concat(e5.day_a,"日")].join(" ")+" - "+["".concat(e5.year_b,"年"),"".concat(e5.month_b,"月"),"".concat(e5.day_b,"日")].join(" "),color:"primary",variant:"filled"})})]})}),(0,y.jsx)(Z.A,{size:{md:7,xs:12},sx:{overflowX:"scroll"},children:(0,y.jsxs)(v.A,{direction:"row",alignItems:"center",children:[(0,y.jsx)(A.A,{variant:"body1",sx:{whiteSpace:"nowrap"},children:"标签："}),(0,y.jsxs)(v.A,{direction:"row",spacing:1,children:[e3.map(function(e){var t=e.id,n=t==e1;return(0,y.jsx)(g.A,{label:e.name,variant:n?"filled":"outlined",color:n?"primary":"default",onDelete:n?function(){return e4(null)}:void 0,onClick:function(e){e4(t)}},t)}),(0,y.jsx)(g.A,{label:"更多",onClick:function(e){e2(!0)}})]})]})}),(0,y.jsx)(Z.A,{size:{xs:12,md:5},sx:{overflowX:"scroll"},children:(0,y.jsxs)(v.A,{direction:"row",alignItems:"center",children:[(0,y.jsx)(A.A,{variant:"body1",children:"作者："}),(0,y.jsxs)(v.A,{direction:"row",spacing:1,children:[Array.from(new Set([].concat(ec,[tn]).filter(function(e){return e}))).map(function(e){return(0,y.jsx)(g.A,{label:e,variant:e==tn?"filled":"outlined",color:e==tn?"primary":"default",onDelete:e==tn?function(){return tr(null)}:void 0,onClick:function(t){tr(e)}},e)}),(0,y.jsx)(g.A,{label:"更多",onClick:function(e){ta()}})]})]})}),(0,y.jsx)(Z.A,{size:{md:6,xs:12},sx:{overflowX:"scroll"},children:(0,y.jsxs)(v.A,{direction:"row",alignItems:"center",children:[(0,y.jsx)(A.A,{variant:"body1",sx:{whiteSpace:"nowrap"},children:"来源："}),(0,y.jsxs)(v.A,{direction:"row",spacing:1,children:[Array.from(new Set([].concat(es,[tc]).filter(function(e){return e}))).map(function(e){var t=e==tc;return(0,y.jsx)(g.A,{label:e,variant:t?"filled":"outlined",color:t?"primary":"default",onDelete:t?function(){return tl(null)}:void 0,onClick:function(t){tl(e)}},e)}),(0,y.jsx)(g.A,{label:"更多",onClick:function(e){tf()}})]})]})}),(0,y.jsxs)(Z.A,{size:1,sx:{display:{md:"flex",xs:"none"}},children:[(0,y.jsxs)(l.Ay,{id:"tips",open:!!tp,anchorEl:tp,disableRestoreFocus:!0,sx:{pointerEvents:"none"},anchorOrigin:{vertical:"bottom",horizontal:"center"},children:[(0,y.jsx)("img",{alt:"",src:"/images/filter.png",width:"200"}),(0,y.jsx)(A.A,{sx:{p:2},children:"可在每一列右上角添加筛选器进行高级检索"})]}),(0,y.jsx)(x.A,{onClick:tx,onMouseEnter:tx,onMouseLeave:function(){tm(null)},sx:{fontSize:11,width:"100%"},children:"高级检索"})]})]})}),eO?null:(0,y.jsx)(ee.A,{variant:"determinate",value:eY}),(0,y.jsx)(v.A,{sx:{flex:1,width:"100%",height:"500px"},children:(0,y.jsx)(p.C,{apiRef:eA,headerFilters:!0,disableColumnFilter:!0,getRowId:function(e){return e.id},initialState:{sorting:{sortModel:[{field:"dates",sort:"asc"}]},pagination:{paginationModel:{pageSize:1e3}}},filterModel:e_,onFilterModelChange:function(e){eC(e),eS.current=e},localeText:u.g.components.MuiDataGrid.defaultProps.localeText,rows:tg,columns:eR.current,pagination:!0,pageSizeOptions:[20,100,1e3]})})]})]}):null}el.getLayout=function(e){return(0,y.jsx)(m.A,{children:e})}},9820:(e,t,n)=>{"use strict";n.d(t,{PK:()=>r,cM:()=>i});var r=function(e){return e.articleCategory="文稿大类",e.articleType="文稿类型",e.place="地点",e.character="人物",e.issuer="出版方/发行方",e.subject="主题/事件",e.recorder="记录",e.reviewer="审核",e.translator="翻译",e.reprint="翻印/传抄",e}({}),i=function(e){return e.appellation="appellation",e.title="title",e.authors="authors",e.place="place",e.subtitle="subtitle",e.subtitle2="subtitle2",e.subtitle3="subtitle3",e.subtitle4="subtitle4",e.subtitle5="subtitle5",e.subdate="subdate",e.paragraph="paragraph",e.quotation="quotation",e.signature="signature",e.image="image",e.image_description="image_description",e}({})},4277:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/articles",function(){return n(7917)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[228,769,94,539,636,593,792],()=>t(4277)),_N_E=e.O()}]);