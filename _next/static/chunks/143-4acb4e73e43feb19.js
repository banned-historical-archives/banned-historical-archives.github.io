"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[143],{4976:(t,e,n)=>{n.d(e,{A:()=>L});var r=n(2819),i=n(6540),o=n(3556),a=n(8967),s=n(5703),c=n(7500),u=n(6043),l=n(4104),p=n(2062),f=n(8495),h=n(7239),d=n(404),m=n(1801),x=n(8348),v=n(5956),g=n(1952),y=n(3156),A=n(1423),b=n(574),j=n(6715),w=n(5315),C=n(7400),_=n(7585),k=n(6860),O=n(4848),S=n(7836),E=(0,a.Ay)("div")(function(t){var e=t.theme;return(0,o.A)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:(0,s.X4)(e.palette.common.white,.15),"&:hover":{backgroundColor:(0,s.X4)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"})}),P=(0,a.Ay)("div")(function(t){return{padding:t.theme.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}}),D=(0,a.Ay)(C.Ay)(function(t){var e=t.theme;return{color:"inherit","& .MuiInputBase-input":(0,o.A)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),")"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"})}}),I=[{name:"首页",path:"/"},{name:"文档",path:"/articles"},{name:"音乐",path:"/music"},{name:"图库",path:"/gallery"}];function R(){var t=(0,j.useRouter)(),e=(0,i.useState)(""),n=e[0],o=e[1],a=(0,i.useState)(!1),s=a[0],C=a[1],R=function(){C(!s)},M=(0,O.jsx)(m.A,{onClick:R,sx:{textAlign:"center"},children:(0,O.jsx)(c.A,{children:I.map(function(t){return(0,O.jsx)(u.Ay,{disablePadding:!0,children:(0,O.jsx)(l.A,{sx:{textAlign:"center"},href:t.path,target:"_blank",children:(0,O.jsx)(p.A,{primary:t.name})})},t.name)})})});return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(d.A,{position:"static",children:(0,O.jsx)(y.A,{maxWidth:"xl",children:(0,O.jsxs)(v.A,{disableGutters:!0,children:[(0,O.jsxs)(r.A,{sx:{position:"relative",ml:1,transform:"translateY(4px)"},children:[(0,O.jsx)(f.A,{sx:{width:20,position:"absolute",bottom:"50%",left:"50%",transform:"translateX(-50%)"}}),(0,O.jsx)(b.A,{})]}),(0,O.jsx)(g.A,{variant:"h6",noWrap:!0,component:"a",sx:{ml:1,mr:2,fontWeight:700,letterSpacing:".3rem",textDecoration:"none",cursor:"pointer"},style:{color:"white"},href:"/",onClick:function(){return t.push("/")},children:"和谐历史档案馆"}),(0,O.jsxs)(E,{sx:{display:{xs:"none",sm:"none",md:"flex",lg:"flex",xl:"flex"}},children:[(0,O.jsx)(P,{children:(0,O.jsx)(k.A,{})}),(0,O.jsx)(D,{placeholder:"全站搜索",onKeyDown:function(t){if("Enter"===t.key){var e;if(null!==(e=S)&&void 0!==S&&null!==(e=e.env)&&void 0!==e&&e.LOCAL_SEARCH_ENGINE){window.open("".concat(location.protocol,"//").concat(location.host,"/search?keyword=")+encodeURIComponent(n),"_blank");return}window.open("https://www.google.com/search?q="+encodeURIComponent("site:banned-historical-archives.github.io "+n),"_blank")}},value:n,onChange:function(t){return o(t.target.value)},inputProps:{"aria-label":"search"}})]}),(0,O.jsx)(r.A,{sx:{flex:1}}),(0,O.jsxs)(r.A,{sx:{display:{xs:"none",sm:"flex"}},direction:"row",justifyContent:"flex-end",children:[I.map(function(e){var n=e.name,r=e.path;return(0,O.jsx)(A.A,{sx:{color:"white"},onClick:function(){return t.push(r)},children:n},r)}),(0,O.jsxs)(A.A,{href:"https://github.com/banned-historical-archives/banned-historical-archives.github.io/issues",target:"_blank",sx:{color:"white"},children:[(0,O.jsx)(w.A,{sx:{mr:1}}),"讨论"]})]}),(0,O.jsx)(_.A,{size:"small",edge:"start",color:"inherit","aria-label":"menu",sx:{display:{xs:"flex",sm:"none"}},onClick:R,children:(0,O.jsx)(h.A,{})})]})})}),(0,O.jsx)(m.A,{component:"nav",children:(0,O.jsx)(x.Ay,{variant:"temporary",anchor:"right",open:s,onClose:R,ModalProps:{keepMounted:!0},sx:{display:{xs:"block",sm:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:240}},children:M})})]})}function M(){return null}var B=n(3815);function L(t){var e=t.children,n=(0,i.useState)(!1),o=n[0],a=n[1],s=(0,j.useRouter)();return(0,i.useEffect)(function(){var t=function(t){a(!0)},e=function(){a(!1)};return s.events.on("routeChangeStart",t),s.events.on("routeChangeComplete",e),s.events.on("routeChangeError",e),function(){s.events.off("routeChangeStart",t),s.events.off("routeChangeComplete",e),s.events.off("routeChangeError",e)}},[s]),(0,O.jsx)(O.Fragment,{children:(0,O.jsxs)(r.A,{sx:{position:"absolute",height:"100%",width:"100%"},direction:"column",children:[(0,O.jsx)(R,{}),o?(0,O.jsxs)(r.A,{spacing:1,p:2,children:[(0,O.jsx)(B.A,{variant:"text",sx:{fontSize:"1rem"}}),(0,O.jsx)(B.A,{variant:"rectangular",height:60}),(0,O.jsx)(B.A,{variant:"rectangular",height:60}),(0,O.jsx)(B.A,{variant:"rectangular",height:60}),(0,O.jsx)(B.A,{variant:"rectangular",height:60})]}):(0,O.jsx)("main",{style:{flex:1,position:"relative",overflow:"hidden"},children:e}),(0,O.jsx)(M,{})]})})}},5536:(t,e,n)=>{n.d(e,{DM:()=>b,N2:()=>A,PP:()=>x,UQ:()=>v,fQ:()=>y,yy:()=>j});var r=n(3439),i=n(7567),o=n(3556),a=n(8242),s=n(4756),c=n.n(s),u=n(2189),l=n(4624),p=n.n(l);function f(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return h(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(t,void 0)}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach(function(e){(0,o.A)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var x="〔",v="〕";function g(t,e){for(var n=[],r=new RegExp("".concat(x,"\\d+").concat(v));;){var i=t.search(r);if(-1==i)break;var o=parseInt(t.match(r)[0].substr(1));t=t.replace(r,""),n.push({part_idx:e,offset:i,index:o})}return[n,t]}function y(t,e){var n=t.parts,r=t.comment_pivots,o=t.comments,s=[],c=[],l=[];for(var p in n)!function(){var t=parseInt(p);if(e.parts[p]){if(e.parts[p].insertBefore){var o,c=f(e.parts[p].insertBefore);try{for(c.s();!(o=c.n()).done;){var h=o.value,d=g(h.text,s.length),y=(0,i.A)(d,2),A=y[0],b=y[1];s.push({type:h.type,text:b}),l.push.apply(l,(0,a.A)(A))}}catch(t){c.e(t)}finally{c.f()}}if(!e.parts[p].delete){var j=n[p].text;if(e.parts[p].diff){var w=Array.from(n[t].text);r.filter(function(e){return e.part_idx===t}).sort(function(t,e){return e.index-t.index}).forEach(function(t){return w.splice(t.offset,0,"".concat(x).concat(t.index).concat(v))});var C=w.join("");j=new u.diff_match_patch().diff_fromDelta(C,e.parts[p].diff).filter(function(t){return -1!==t[0]}).map(function(t){return t[1]}).join("")}var _=g(j,s.length),k=(0,i.A)(_,2),O=k[0],S=k[1];s.push({type:e.parts[p].type||n[p].type,text:S}),l.push.apply(l,(0,a.A)(O))}if(e.parts[p].insertAfter){var E,P=f(e.parts[p].insertAfter);try{for(P.s();!(E=P.n()).done;){var D=E.value,I=g(D.text,s.length),R=(0,i.A)(I,2),M=R[0],B=R[1];s.push({type:D.type,text:B}),l.push.apply(l,(0,a.A)(M))}}catch(t){P.e(t)}finally{P.f()}}}else l.push.apply(l,(0,a.A)(r.filter(function(e){return e.part_idx===t}).map(function(t){return m(m({},t),{},{part_idx:s.length})}))),s.push(n[p])}();if(e.newComments&&e.newComments.length)c.push.apply(c,(0,a.A)(e.newComments));else for(var h in o){var d=parseInt(h)+1;if(e.comments[d]){if(e.comments[d].insertBefore&&c.push.apply(c,(0,a.A)(e.comments[d].insertBefore.map(function(t){return t.text}))),!e.comments[d].delete){var y=e.comments[d].diff?new u.diff_match_patch().diff_fromDelta(o[h],e.comments[d].diff).filter(function(t){return -1!==t[0]}).map(function(t){return t[1]}).join(""):o[h];c.push(y)}e.comments[d].insertAfter&&c.push.apply(c,(0,a.A)(e.comments[d].insertAfter.map(function(t){return t.text})))}else c.push(t.comments[h])}var A=m({},t);return A.comments=c,A.parts=s,A.comment_pivots=l,"string"==typeof e.description?e.description.length&&(A.description=new u.diff_match_patch().diff_fromDelta(t.description||"",e.description).filter(function(t){return -1!==t[0]}).map(function(t){return t[1]}).join("")):A.description="",A}function A(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"00";return t||0===t?t<10?"0".concat(t):t:e}function b(t){return p().createHash("md5").update(t).digest("hex")}function j(t){return w.apply(this,arguments)}function w(){return(w=(0,r.A)(c().mark(function t(e){return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){return setTimeout(t,e)}));case 1:case"end":return t.stop()}},t)}))).apply(this,arguments)}}}]);